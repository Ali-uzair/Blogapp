<p id="notice"><%= notice %></p>

<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<p>
  <strong>Description:</strong>
  <%= @post.description %>
</p>

<p>
  <strong>Published:</strong>
  <%= @post.published %>
</p>

<p>
  <strong>Published at:</strong>
  <%= @post.created_at %>
</p>

<p>
  <strong>User:</strong>
  <%= @post.user.name %>
</p>


<% if @post.published? %>
<div class="d-flex">
  <div class="row">
    <span class='parent-likes'>
    <span class='like_count' <%=@post.id%>>
      <%=@post.get_likes.size%> &#128077
    </span>
  </div>
    <a>
      <%if current_user.liked? @post%>
        <div> <%= link_to like_post_path(@post, 'unlike'), class: 'preached-btn',
                method: :put, remote: :true do %> Preached </div>
        <% end %>

        <% else%>
        <div> <%= link_to like_post_path(@post, 'like'), class: 'preach-btn',
                method: :put, remote: :true do %> Preach </div>
      <% end %>
      <% end %>
    </a>
  </span>


    <% report = Report.find_by(reportable_type: "Post", reportable_id:@post.id, user_id:current_user.id)%>
    <%if report.nil?%>
      <%= button_to "Report", reports_path(post_id: @post.id, type: "Post"), method: :post, class: 'btn btn-secondary', style: 'display:inline-block' %>
    <% else %>
      <%= button_to "Reported", report_path(report_id: report, type:"Post"), method: :delete, class: 'btn btn-primary' %>|
    <% end %>

    <% if current_user.id == @post.user.id%>
      <%= button_to 'Destroy', @posts,
                method: :delete,
                data: { confirm: 'Are you sure?' }, class:'btn btn-primary', style: 'text-decoration : none' %>|
      <span>
      <%= link_to 'Edit', edit_post_path(@post), class: 'btn btn-primary' %>|
    <%end%>

    <a href="#" class="comment-form-display btn btn-primary">Suggest</a>

    <div class="sub-comment-form">
      <%= render 'users/suggestions/form', locals: {post: @post, user_id: current_user.id} %>
    </div>
  </div>

  <div class="container">
    <div class="comment-form">
      <hr />
      <div class="row">
        <div class="col-md-6">
          <h3 class="subtitle is-3">Leave a reply</h3>
          <%= render partial: 'users/comments/form', locals: {post: @post, parent: nil} %>
          <h2 class="subtitle is-5"><strong><%= @post.comments.count %></strong> Comments</h2>
          <%= render @post.comments.where(parent_id: nil).includes(:user).order(id: :desc) %>
        </div>
          <div class="col-md-6">
              <h3 class="subtitle is-3">Suggestions</h3>
              <%= render partial: 'users/suggestions/suggestion', collection: @post.suggestions, as: 'suggestion' %>
          </div>
      </div>
    </div>
  </div>
<% else %>

  <%if current_user.moderator?%>
    <%= link_to 'approve', edit_pending_path(@post), class: 'btn btn-primary' %>
  <% end %>

<%end%>

 <%= link_to 'back', posts_url%>
