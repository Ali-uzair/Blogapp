<div class="box">
  <article class="media">
    <div class="media-content">
      <div class="content">

        <strong><%= User.find(comment.user.id).name%>:</strong>
        <% if comment.cover_picture.attached?%>
          <%= image_tag(comment.cover_picture) %>
        <%end%>
        <%= comment.comment %>
        <a href="#" class="comment-form-display">reply</a>
        <div class="sub-comment-form">
          <%= render partial: 'users/comments/form', locals: {post: comment.post, parent: comment}%>
        </div>

        <div class="d-flex">

          <div>
            <%= comment.likings.count%>  &#128077
          </div>

          <div >
            <% liking = current_user.likings.find_by(comment: comment) %>
            <%if liking.nil?%>
            <%= button_to "like", likings_path, params: {liking: { comment_id: comment.id}}, method: :post %>
            <% else %>
            <%= button_to "unlike", liking_path(liking), method: :delete %>
            <% end %>
          </div>
          <div>
            <% report = Report.find_by(reportable_type: "Comment", reportable_id:comment.id, user_id:current_user.id)%>
            <%if report.nil?%>
              <%= button_to "Report", reports_path(comment_id: comment.id, type: "Comment"), method: :post, style: 'display:inline-block' %>
            <% else %>
              <%= button_to "Reported", report_path(report_id: report, comment_id: comment.id, type: "Comment"), method: :delete %>
            <% end %>
          </div>
          <%if comment.user.id == current_user.id%>
          <div>
              <%= button_to 'Delete', [comment.post, comment],
                          method: :delete, class: "button is-danger", data: { confirm: 'Are you sure?' } %>
          </div>
          <% end %>
        </div>


      </div>

    </div>

    <hr />

    <div class="sub-comments">
      <%= render comment.comments%>
    </div>
  </article>
</div>

